# Media Service E2E Test Environment (macOS)
# Copy to .env.media and customize as needed

# MediaMTX Ports
MEDIAMTX_RTSP_PORT=8554
MEDIAMTX_RTMP_PORT=1935
MEDIAMTX_API_PORT=8889
MEDIAMTX_METRICS_PORT=9998
MEDIAMTX_PLAYBACK_PORT=9996

# MediaMTX Container Config
MEDIAMTX_CONTAINER_NAME=e2e-mediamtx
MEDIAMTX_LOG_LEVEL=info
MEDIAMTX_PROTOCOLS=tcp

# Media Service Config
MEDIA_SERVICE_PORT=8080
MEDIA_SERVICE_CONTAINER_NAME=e2e-media-service
MEDIA_SERVICE_IMAGE=media-service:e2e

# STS Service URL (uses host.docker.internal for macOS Docker)
STS_SERVICE_URL=http://host.docker.internal:3000

# Orchestrator URL (for MediaMTX hooks)
ORCHESTRATOR_URL=http://media-service:8080

# Logging
LOG_LEVEL=INFO
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3

# Health Check Config
HEALTHCHECK_INTERVAL=10s
HEALTHCHECK_TIMEOUT=5s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=15s

# Resource Limits (reduced for local testing)
MEDIAMTX_CPU_LIMIT=1.0
MEDIAMTX_MEMORY_LIMIT=1G
MEDIAMTX_CPU_RESERVATION=0.25
MEDIAMTX_MEMORY_RESERVATION=256M

MEDIA_SERVICE_CPU_LIMIT=2.0
MEDIA_SERVICE_MEMORY_LIMIT=2G
MEDIA_SERVICE_CPU_RESERVATION=0.5
MEDIA_SERVICE_MEMORY_RESERVATION=512M

# Network
NETWORK_NAME=e2e-media-network

# Volumes
SEGMENTS_VOLUME_NAME=e2e-media-segments

# Circuit Breaker
CIRCUIT_BREAKER_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60

# Segment Config
SEGMENT_DIR=/tmp/segments
MAX_CONCURRENT_STREAMS=10
METRICS_ENABLED=true
