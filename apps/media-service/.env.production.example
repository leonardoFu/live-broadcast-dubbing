# Production Environment Configuration
# This file contains production-specific settings
# Copy to .env.production and customize for your deployment

# =============================================================================
# REQUIRED PRODUCTION SETTINGS
# =============================================================================

# STS Service URL (REQUIRED - no default)
STS_SERVICE_URL=https://sts.production.example.com

# Log Level (INFO or WARNING for production)
LOG_LEVEL=INFO

# Build Environment
BUILD_ENV=production

# =============================================================================
# PRODUCTION RESOURCE LIMITS
# =============================================================================

# MediaMTX Resources (adjust based on stream count)
MEDIAMTX_CPU_LIMIT=4.0
MEDIAMTX_CPU_RESERVATION=1.0
MEDIAMTX_MEMORY_LIMIT=4G
MEDIAMTX_MEMORY_RESERVATION=1G

# Media Service Resources (adjust based on concurrent streams)
MEDIA_SERVICE_CPU_LIMIT=8.0
MEDIA_SERVICE_CPU_RESERVATION=2.0
MEDIA_SERVICE_MEMORY_LIMIT=8G
MEDIA_SERVICE_MEMORY_RESERVATION=2G

# =============================================================================
# PRODUCTION NETWORKING
# =============================================================================

# Use production-specific network name
NETWORK_NAME=dubbing-production-network

# Production ports (change if needed to avoid conflicts)
MEDIA_SERVICE_PORT=8080
MEDIAMTX_RTMP_PORT=1935
MEDIAMTX_RTSP_PORT=8554
MEDIAMTX_API_PORT=9997

# =============================================================================
# PRODUCTION TUNING
# =============================================================================

# Concurrent stream processing (based on CPU cores)
MAX_CONCURRENT_STREAMS=20

# Circuit Breaker (stricter in production)
CIRCUIT_BREAKER_THRESHOLD=3
CIRCUIT_BREAKER_TIMEOUT=120

# Metrics
METRICS_ENABLED=true

# =============================================================================
# PRODUCTION LOGGING
# =============================================================================

# Log rotation (prevent disk space issues)
LOG_MAX_SIZE=50m
LOG_MAX_FILES=10

# MediaMTX logging (less verbose in production)
MEDIAMTX_LOG_LEVEL=warn

# =============================================================================
# HEALTH CHECKS (production values)
# =============================================================================

HEALTHCHECK_INTERVAL=15s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=5
HEALTHCHECK_START_PERIOD=30s
