{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "segmentation-config-schema.json",
  "title": "SegmentationConfig",
  "description": "VAD segmentation configuration loaded from environment variables",
  "type": "object",
  "properties": {
    "silence_threshold_db": {
      "type": "number",
      "minimum": -100.0,
      "maximum": 0.0,
      "default": -50.0,
      "description": "RMS level (dB) below which audio is considered silence"
    },
    "silence_duration_s": {
      "type": "number",
      "minimum": 0.1,
      "maximum": 5.0,
      "default": 1.0,
      "description": "Duration of silence (seconds) to trigger segment boundary"
    },
    "min_segment_duration_s": {
      "type": "number",
      "minimum": 0.5,
      "maximum": 5.0,
      "default": 1.0,
      "description": "Minimum segment duration (seconds) before emission"
    },
    "max_segment_duration_s": {
      "type": "number",
      "minimum": 5.0,
      "maximum": 60.0,
      "default": 15.0,
      "description": "Maximum segment duration (seconds) before forced emission"
    },
    "level_interval_ns": {
      "type": "integer",
      "minimum": 50000000,
      "maximum": 500000000,
      "default": 100000000,
      "description": "Level element measurement interval in nanoseconds (100ms default)"
    },
    "memory_limit_bytes": {
      "type": "integer",
      "minimum": 1048576,
      "maximum": 104857600,
      "default": 10485760,
      "description": "Maximum audio accumulator memory per stream (10MB default)"
    }
  },
  "required": [],
  "additionalProperties": false,
  "examples": [
    {
      "silence_threshold_db": -50.0,
      "silence_duration_s": 1.0,
      "min_segment_duration_s": 1.0,
      "max_segment_duration_s": 15.0,
      "level_interval_ns": 100000000,
      "memory_limit_bytes": 10485760
    },
    {
      "silence_threshold_db": -40.0,
      "silence_duration_s": 0.5,
      "min_segment_duration_s": 2.0,
      "max_segment_duration_s": 20.0
    }
  ]
}
